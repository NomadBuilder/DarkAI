"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305,591],{1305:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(7437),a=r(5095),s=r(909),l=r(7479),i=r(4091),o=r(5565);function c(){let{receiptsMode:e,selectedVendor:t,setReceiptsMode:r,setSelectedVendor:c}=(0,l.N)();return(0,n.jsx)(a.M,{children:e&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,zIndex:40},children:(0,n.jsxs)("div",{className:"receipt-overlay flex items-center justify-center p-4 md:p-8 relative",children:[(0,n.jsx)("div",{onClick:()=>{r(!1),c(null)},className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,n.jsx)(s.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.22,1,.36,1]},children:(0,n.jsx)("div",{className:"relative z-10",children:(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"max-w-5xl w-full max-h-[90vh] overflow-y-auto rounded-xl md:rounded-2xl shadow-2xl bg-white",children:[(0,n.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 md:px-8 py-4 md:py-6 flex justify-between items-center z-10",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("h2",{className:"text-xl md:text-2xl font-light text-gray-900",children:"Receipts Mode"}),t&&(0,n.jsx)("button",{onClick:()=>c(null),className:"text-sm text-gray-500 hover:text-gray-700 font-light underline",children:"← Back to list"})]}),(0,n.jsx)("button",{onClick:()=>{r(!1),c(null)},className:"text-gray-400 hover:text-gray-600 text-2xl md:text-3xl leading-none transition-colors active:scale-95 touch-manipulation","aria-label":"Close",children:"\xd7"})]}),(0,n.jsx)("div",{className:"p-4 md:p-8",children:t?(0,n.jsx)(i.Z,{vendorId:t}):(0,n.jsx)(o.Z,{})})]})})})]})})})})}},4091:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(7437),a=r(2265),s=r(4591);function l(e){var t;let{vendorId:r}=e,[l,i]=(0,a.useState)(null),[o,c]=(0,a.useState)([]),[d,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{x(!0);try{let[e,t]=await Promise.all([fetch((0,s.z)("vendors_master.json")).then(e=>e.json()).catch(()=>[]),fetch((0,s.z)("payments_by_year.json")).then(e=>e.json()).catch(()=>[])]),n=Array.isArray(e)?e.find(e=>e.vendor_id===r):null,a=Array.isArray(t)?t.filter(e=>e.vendor_id===r):[];i(n||null),c(a||[])}catch(e){console.error("Failed to load vendor data:",e)}finally{x(!1)}})()},[r]);let m=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);if(d)return(0,n.jsx)("div",{className:"py-12 md:py-16 text-center",children:(0,n.jsx)("p",{className:"text-gray-500 font-light",children:"Loading vendor information..."})});if(!l)return(0,n.jsx)("div",{className:"py-12 md:py-16 text-center",children:(0,n.jsx)("p",{className:"text-gray-500 font-light",children:"Vendor information not found"})});let u=l.yearly_payments||{},p=Object.values(u).reduce((e,t)=>e+(t||0),0),g=Object.keys(u).map(Number).filter(e=>u[e]>0).sort(),h=g[0],y=g[g.length-1],f=l.name||l.vendor_name_normalized||"Unknown";return(0,n.jsxs)("div",{className:"space-y-6 md:space-y-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-2xl md:text-3xl font-light text-gray-900 mb-3 md:mb-4 break-words",children:f}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 md:gap-3 mb-4",children:[(0,n.jsx)("span",{className:"px-3 md:px-4 py-1.5 md:py-2 rounded-full text-xs md:text-sm font-light ".concat("for_profit"===l.type?"bg-red-50 text-red-800 border border-red-200":"public"===l.type?"bg-blue-50 text-blue-800 border border-blue-200":"non_profit"===l.type?"bg-green-50 text-green-800 border border-green-200":"bg-gray-50 text-gray-800 border border-gray-200"),children:(null===(t=l.type)||void 0===t?void 0:t.replace("_"," "))||"unknown"}),l.category&&(0,n.jsx)("span",{className:"px-3 md:px-4 py-1.5 md:py-2 rounded-full text-xs md:text-sm font-light bg-gray-50 text-gray-800 border border-gray-200",children:l.category.replace("_"," ")})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[(0,n.jsx)("a",{href:(e=>{let t=encodeURIComponent(e);return"https://www.google.com/search?q=".concat(t,"+Ontario+Canada")})(f),target:"_blank",rel:"noopener noreferrer",className:"text-xs md:text-sm text-blue-600 hover:text-blue-800 underline font-light",children:"Search for company info →"}),(0,n.jsx)("span",{className:"text-gray-300",children:"|"}),(0,n.jsx)("a",{href:(e=>{let t=encodeURIComponent(e);return"https://www.ic.gc.ca/app/scr/cc/CorporationsCanada/fdrlCrpSrch.html?q=".concat(t)})(f),target:"_blank",rel:"noopener noreferrer",className:"text-xs md:text-sm text-blue-600 hover:text-blue-800 underline font-light",children:"Check corporate registry →"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6",children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 md:p-6",children:[(0,n.jsx)("p",{className:"text-xs md:text-sm text-gray-500 mb-2 font-light",children:"Total Payments"}),(0,n.jsx)("p",{className:"text-xl md:text-2xl font-light text-gray-900 break-words",children:m(p)})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 md:p-6",children:[(0,n.jsx)("p",{className:"text-xs md:text-sm text-gray-500 mb-2 font-light",children:"First Payment"}),(0,n.jsx)("p",{className:"text-xl md:text-2xl font-light text-gray-900",children:h||"N/A"})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 md:p-6",children:[(0,n.jsx)("p",{className:"text-xs md:text-sm text-gray-500 mb-2 font-light",children:"Last Payment"}),(0,n.jsx)("p",{className:"text-xl md:text-2xl font-light text-gray-900",children:y||"N/A"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-lg md:text-xl font-light text-gray-900 mb-3 md:mb-4",children:"Payment History by Year"}),(0,n.jsx)("div",{className:"space-y-2 max-h-64 md:max-h-96 overflow-y-auto",children:g.map(e=>{let t=u[e]||0;return(0,n.jsxs)("div",{className:"flex justify-between items-center py-2 md:py-3 border-b border-gray-100",children:[(0,n.jsx)("span",{className:"text-sm md:text-base text-gray-700 font-light",children:e}),(0,n.jsx)("span",{className:"text-sm md:text-base font-light text-gray-900",children:m(t)})]},e)})})]}),(0,n.jsxs)("div",{className:"pt-4 md:pt-6 border-t border-gray-200 space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-gray-400 font-light mb-1",children:"Source Data:"}),(0,n.jsx)("a",{href:"https://data.ontario.ca/dataset/public-accounts-detailed-schedule-of-payments",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 underline font-light",children:"Ontario Public Accounts — Detailed Schedule of Payments →"})]}),l.evidence_note&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-gray-400 font-light mb-1",children:"Classification Note:"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 font-light",children:l.evidence_note})]})]})]})}},5565:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(7437),a=r(2265),s=r(7479),l=r(4591);function i(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null),[d,x]=(0,a.useState)("all"),{setSelectedVendor:m}=(0,s.N)(),u=async()=>{c(null),i(!0);try{let e=(0,l.z)("vendors_master.json"),r=await fetch(e);if(!r.ok)throw Error("HTTP ".concat(r.status,": ").concat(r.statusText));let n=await r.json();if(Array.isArray(n)){let e=n.filter(e=>{let t=e.type||e.vendor_type;return"for_profit"===t||"non_profit"===t||"public"===t}).map(e=>{let t=e.yearly_payments||{},r=Object.values(t).reduce((e,t)=>e+(t||0),0);return{...e,_total:r,name:e.name||e.vendor_name_normalized||"Unknown",vendorType:e.type||e.vendor_type||"unknown"}});e.sort((e,t)=>t._total-e._total),t(e)}else c("Vendor data format is invalid.")}catch(e){c(e instanceof Error?e.message:"Failed to load vendors."),console.error("Failed to load vendors:",e)}finally{i(!1)}};(0,a.useEffect)(()=>{u()},[]);let p=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0,notation:"compact",compactDisplay:"short"}).format(e);if(r)return(0,n.jsx)("div",{className:"py-8 text-center",children:(0,n.jsx)("p",{className:"text-gray-500 font-light",children:"Loading vendors..."})});if(o)return(0,n.jsxs)("div",{className:"py-8 text-center",children:[(0,n.jsx)("p",{className:"text-red-600 font-light mb-2",children:o}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 font-light mb-4",children:["For local dev use ",(0,n.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"npm run dev"})," and open ",(0,n.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"/receipts"}),"."]}),(0,n.jsx)("button",{type:"button",onClick:u,className:"text-sm text-gray-700 underline hover:no-underline","aria-label":"Retry loading vendors",children:"Retry"})]});let g=e.filter(e=>"all"===d?"public"!==e.vendorType:e.vendorType===d).slice(0,20),h=e=>{switch(e){case"for_profit":return(0,n.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-light bg-red-100 text-red-700 border border-red-200",children:"\uD83D\uDCBC For-Profit Company"});case"non_profit":return(0,n.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-light bg-green-100 text-green-700 border border-green-200",children:"\uD83E\uDDE9 Non-Profit Operator"});case"public":return(0,n.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-light bg-blue-100 text-blue-700 border border-blue-200",children:"\uD83C\uDFDB Public Institution"});default:return null}},y=e=>{switch(e){case"for_profit":return"text-red-600";case"non_profit":return"text-green-600";case"public":return"text-blue-600";default:return"text-gray-600"}};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"text-xl md:text-2xl font-light text-gray-900 mb-2",children:"Largest Paid Non-Public Entities"}),(0,n.jsx)("p",{className:"text-sm md:text-base text-gray-600 font-light",children:"Click any entity to see detailed payment information"})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 border-b border-gray-200 pb-2",children:[(0,n.jsx)("button",{onClick:()=>x("all"),className:"px-3 py-1.5 text-sm font-light rounded-t-lg transition-colors ".concat("all"===d?"bg-gray-100 text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"),children:"All Types"}),(0,n.jsx)("button",{onClick:()=>x("for_profit"),className:"px-3 py-1.5 text-sm font-light rounded-t-lg transition-colors ".concat("for_profit"===d?"bg-red-50 text-red-900 border-b-2 border-red-600":"text-gray-600 hover:text-gray-900"),children:"For-Profit Companies"}),(0,n.jsx)("button",{onClick:()=>x("non_profit"),className:"px-3 py-1.5 text-sm font-light rounded-t-lg transition-colors ".concat("non_profit"===d?"bg-green-50 text-green-900 border-b-2 border-green-600":"text-gray-600 hover:text-gray-900"),children:"Non-Profit Operators"}),(0,n.jsx)("button",{onClick:()=>x("public"),className:"px-3 py-1.5 text-sm font-light rounded-t-lg transition-colors ".concat("public"===d?"bg-blue-50 text-blue-900 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:"Public Institutions"})]}),(0,n.jsx)("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:g.map(e=>{let t=e._total||0,r=e.vendorType||"unknown";return(0,n.jsx)("button",{onClick:()=>m(e.vendor_id),className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all active:scale-[0.98]",children:(0,n.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-start gap-2 mb-1.5",children:[(0,n.jsx)("p",{className:"font-light text-gray-900 text-base md:text-lg truncate flex-1",children:e.name}),h(r)]}),e.category&&(0,n.jsx)("p",{className:"text-xs md:text-sm text-gray-500 font-light capitalize",children:e.category.replace("_"," ")})]}),(0,n.jsx)("div",{className:"text-right flex-shrink-0",children:(0,n.jsx)("p",{className:"text-base md:text-lg font-light ".concat(y(r)),children:p(t)})})]})},e.vendor_id)})}),0===g.length&&(0,n.jsx)("div",{className:"text-center py-8 text-gray-500 font-light",children:"No entities found in this category"})]})}},7479:function(e,t,r){r.d(t,{N:function(){return n}});let n=(0,r(9625).Ue)(e=>({currentYear:2014,receiptsMode:!1,activeLens:null,scrollProgress:0,selectedVendor:null,setCurrentYear:t=>e({currentYear:t}),setReceiptsMode:t=>e({receiptsMode:t}),setActiveLens:t=>e({activeLens:t}),setScrollProgress:t=>e({scrollProgress:t}),setSelectedVendor:t=>e({selectedVendor:t})}))},4591:function(e,t,r){function n(e){let t=window.location.pathname.startsWith("/ledger")?"/ledger":"",r=e.startsWith("/")?e.slice(1):e;return t?"".concat(t,"/").concat(r):"/".concat(r)}function a(e){return n("data/processed/".concat(e))}function s(e){return n("data/".concat(e))}r.d(t,{getDataPath:function(){return n},j:function(){return s},z:function(){return a}})}}]);