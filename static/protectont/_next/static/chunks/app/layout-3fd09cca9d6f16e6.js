(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5926:function(e,t,r){Promise.resolve().then(r.t.bind(r,7960,23)),Promise.resolve().then(r.bind(r,4389)),Promise.resolve().then(r.bind(r,3650)),Promise.resolve().then(r.bind(r,8349)),Promise.resolve().then(r.t.bind(r,8003,23))},4389:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7437),s=r(2265);function l(){let[e,t]=(0,s.useState)(!1),[r,l]=(0,s.useState)([{role:"assistant",content:"Ask a question (site sources only)."}]),[a,o]=(0,s.useState)(""),[i,c]=(0,s.useState)(!1),d=r.some(e=>"user"===e.role),u=async e=>{let t=(null!=e?e:a).trim();if(!t||i)return;let n=[...r,{role:"user",content:t}];l(n),o(""),c(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})}),r=await e.json(),s=(null==r?void 0:r.answer)||"Sorry — I could not generate a response.";l([...n,{role:"assistant",content:s}])}catch(e){l([...n,{role:"assistant",content:"Sorry — something went wrong. Please try again."}])}finally{c(!1)}};return(0,n.jsx)("div",{className:"fixed bottom-5 right-5 z-[90]",children:e?(0,n.jsxs)("div",{className:"w-[320px] sm:w-[360px] rounded-2xl bg-white shadow-xl border border-slate-200 overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-900 text-white",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:"/shield-icon.png",alt:"",className:"h-5 w-5"}),(0,n.jsxs)("div",{className:"leading-tight",children:[(0,n.jsx)("span",{className:"text-sm font-light block",children:"Assistant"}),(0,n.jsx)("span",{className:"text-[11px] text-slate-300",children:"Answers from site sources only."})]})]}),(0,n.jsx)("button",{onClick:()=>t(!1),className:"text-white/80 hover:text-white text-lg leading-none","aria-label":"Close chat",children:"\xd7"})]}),(0,n.jsxs)("div",{className:"max-h-[320px] overflow-y-auto px-4 py-3 space-y-3 text-sm",children:[r.map((e,t)=>(0,n.jsx)("div",{className:"rounded-xl px-3 py-2 leading-relaxed ".concat("user"===e.role?"bg-blue-50 text-blue-900 self-end":"bg-slate-100 text-slate-700"),children:e.content},"".concat(e.role,"-").concat(t))),i&&(0,n.jsx)("div",{className:"rounded-xl px-3 py-2 bg-slate-100 text-slate-500",children:"Thinking…"})]}),(0,n.jsxs)("div",{className:"border-t border-slate-200 px-3 py-2 space-y-2",children:[!d&&(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:["What is Bill 60 and why does it matter?","What does Bill 5 change for species protection?","Where can I find the sources for the Greenbelt issue?","What protests are listed right now?"].map(e=>(0,n.jsx)("button",{onClick:()=>u(e),className:"text-xs px-2 py-1 rounded-full bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors",disabled:i,children:e},e))}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{value:a,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&u()},placeholder:"Ask about Protect Ontario…",className:"flex-1 text-sm px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-200"}),(0,n.jsx)("button",{onClick:()=>u(),disabled:i,className:"px-3 py-2 text-sm rounded-lg bg-[#2E4A6B] text-white hover:bg-[#243d56] disabled:opacity-60",children:"Send"})]})]})]}):(0,n.jsxs)("button",{onClick:()=>t(!0),className:"rounded-full bg-[#2E4A6B] text-white px-4 py-3 shadow-lg hover:bg-[#243d56] transition-colors flex items-center gap-2",children:[(0,n.jsx)("img",{src:"/shield-icon.png",alt:"",className:"h-4 w-4"}),"Assistant"]})})}},3650:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7437),s=r(2265);class l extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){if(this.state.hasError){var e;return this.props.fallback||(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white p-8",children:(0,n.jsxs)("div",{className:"max-w-2xl w-full text-center space-y-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-light text-gray-900",children:"Something went wrong"}),(0,n.jsx)("p",{className:"text-gray-600 font-light",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,n.jsx)("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Reload Page"})]})})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null}}}},8349:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7437),s=r(7648);function l(){return(0,n.jsx)("footer",{className:"border-t border-slate-100 bg-white",children:(0,n.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 md:px-8 py-3",children:(0,n.jsxs)("div",{className:"flex flex-col items-center text-center sm:flex-row sm:items-center sm:justify-between sm:text-left gap-2 text-xs text-slate-500 font-light",children:[(0,n.jsxs)("span",{children:["Copyright ",new Date().getFullYear()," ProtectOnt. All rights reserved."]}),(0,n.jsxs)("div",{className:"flex flex-wrap justify-center sm:justify-end gap-x-4 gap-y-2",children:[(0,n.jsx)(s.default,{href:"/about",className:"hover:text-slate-700 transition-colors",children:"About"}),(0,n.jsx)(s.default,{href:"/methodology",className:"hover:text-slate-700 transition-colors",children:"Methodology"}),(0,n.jsx)(s.default,{href:"/privacy",className:"hover:text-slate-700 transition-colors",children:"Privacy"}),(0,n.jsx)(s.default,{href:"/terms",className:"hover:text-slate-700 transition-colors",children:"Terms"})]})]})})})}},8221:function(e,t){"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DOMAttributeNames:function(){return n},default:function(){return a},isEqualNode:function(){return l}});let n={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"};function s(e){let{type:t,props:r}=e,s=document.createElement(t);for(let e in r){if(!r.hasOwnProperty(e)||"children"===e||"dangerouslySetInnerHTML"===e||void 0===r[e])continue;let l=n[e]||e.toLowerCase();"script"===t&&("async"===l||"defer"===l||"noModule"===l)?s[l]=!!r[e]:s.setAttribute(l,r[e])}let{children:l,dangerouslySetInnerHTML:a}=r;return a?s.innerHTML=a.__html||"":l&&(s.textContent="string"==typeof l?l:Array.isArray(l)?l.join(""):""),s}function l(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){let r=t.getAttribute("nonce");if(r&&!e.getAttribute("nonce")){let n=t.cloneNode(!0);return n.setAttribute("nonce",""),n.nonce=r,r===e.nonce&&e.isEqualNode(n)}}return e.isEqualNode(t)}function a(){return{mountedInstances:new Set,updateHead:e=>{let t={};e.forEach(e=>{if("link"===e.type&&e.props["data-optimized-fonts"]){if(document.querySelector('style[data-href="'+e.props["data-href"]+'"]'))return;e.props.href=e.props["data-href"],e.props["data-href"]=void 0}let r=t[e.type]||[];r.push(e),t[e.type]=r});let n=t.title?t.title[0]:null,s="";if(n){let{children:e}=n.props;s="string"==typeof e?e:Array.isArray(e)?e.join(""):""}s!==document.title&&(document.title=s),["meta","base","link","style","script"].forEach(e=>{r(e,t[e]||[])})}}}r=(e,t)=>{let r=document.getElementsByTagName("head")[0],n=r.querySelector("meta[name=next-head-count]"),a=Number(n.content),o=[];for(let t=0,r=n.previousElementSibling;t<a;t++,r=(null==r?void 0:r.previousElementSibling)||null){var i;(null==r?void 0:null==(i=r.tagName)?void 0:i.toLowerCase())===e&&o.push(r)}let c=t.map(s).filter(e=>{for(let t=0,r=o.length;t<r;t++)if(l(o[t],e))return o.splice(t,1),!1;return!0});o.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),c.forEach(e=>r.insertBefore(e,n)),n.content=(a-o.length+c.length).toString()},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8003:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return b},handleClientScriptLoad:function(){return m},initScriptLoader:function(){return g}});let n=r(7043),s=r(3099),l=r(7437),a=n._(r(4887)),o=s._(r(2265)),i=r(8701),c=r(8221),d=r(3515),u=new Map,f=new Set,h=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"],p=e=>{if(a.default.preinit){e.forEach(e=>{a.default.preinit(e,{as:"style"})});return}if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t.appendChild(r)})}},x=e=>{let{src:t,id:r,onLoad:n=()=>{},onReady:s=null,dangerouslySetInnerHTML:l,children:a="",strategy:o="afterInteractive",onError:i,stylesheets:d}=e,x=r||t;if(x&&f.has(x))return;if(u.has(t)){f.add(x),u.get(t).then(n,i);return}let m=()=>{s&&s(),f.add(x)},g=document.createElement("script"),y=new Promise((e,t)=>{g.addEventListener("load",function(t){e(),n&&n.call(this,t),m()}),g.addEventListener("error",function(e){t(e)})}).catch(function(e){i&&i(e)});for(let[r,n]of(l?(g.innerHTML=l.__html||"",m()):a?(g.textContent="string"==typeof a?a:Array.isArray(a)?a.join(""):"",m()):t&&(g.src=t,u.set(t,y)),Object.entries(e))){if(void 0===n||h.includes(r))continue;let e=c.DOMAttributeNames[r]||r.toLowerCase();g.setAttribute(e,n)}"worker"===o&&g.setAttribute("type","text/partytown"),g.setAttribute("data-nscript",o),d&&p(d),document.body.appendChild(g)};function m(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,d.requestIdleCallback)(()=>x(e))}):x(e)}function g(e){e.forEach(m),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");f.add(t)})}function y(e){let{id:t,src:r="",onLoad:n=()=>{},onReady:s=null,strategy:c="afterInteractive",onError:u,stylesheets:h,...p}=e,{updateScripts:m,scripts:g,getIsSsr:y,appDir:b,nonce:v}=(0,o.useContext)(i.HeadManagerContext),j=(0,o.useRef)(!1);(0,o.useEffect)(()=>{let e=t||r;j.current||(s&&e&&f.has(e)&&s(),j.current=!0)},[s,t,r]);let w=(0,o.useRef)(!1);if((0,o.useEffect)(()=>{!w.current&&("afterInteractive"===c?x(e):"lazyOnload"===c&&("complete"===document.readyState?(0,d.requestIdleCallback)(()=>x(e)):window.addEventListener("load",()=>{(0,d.requestIdleCallback)(()=>x(e))})),w.current=!0)},[e,c]),("beforeInteractive"===c||"worker"===c)&&(m?(g[c]=(g[c]||[]).concat([{id:t,src:r,onLoad:n,onReady:s,onError:u,...p}]),m(g)):y&&y()?f.add(t||r):y&&!y()&&x(e)),b){if(h&&h.forEach(e=>{a.default.preinit(e,{as:"style"})}),"beforeInteractive"===c)return r?(a.default.preload(r,p.integrity?{as:"script",integrity:p.integrity,nonce:v,crossOrigin:p.crossOrigin}:{as:"script",nonce:v,crossOrigin:p.crossOrigin}),(0,l.jsx)("script",{nonce:v,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([r,{...p,id:t}])+")"}})):(p.dangerouslySetInnerHTML&&(p.children=p.dangerouslySetInnerHTML.__html,delete p.dangerouslySetInnerHTML),(0,l.jsx)("script",{nonce:v,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...p,id:t}])+")"}}));"afterInteractive"===c&&r&&a.default.preload(r,p.integrity?{as:"script",integrity:p.integrity,nonce:v,crossOrigin:p.crossOrigin}:{as:"script",nonce:v,crossOrigin:p.crossOrigin})}return null}Object.defineProperty(y,"__nextScript",{value:!0});let b=y;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7960:function(){}},function(e){e.O(0,[587,648,971,117,744],function(){return e(e.s=5926)}),_N_E=e.O()}]);