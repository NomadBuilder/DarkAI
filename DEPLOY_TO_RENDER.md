# üöÄ Deploy DarkAI Consolidated to Render - Step-by-Step Guide

## ‚úÖ Prerequisites
- GitHub account
- Render.com account (free tier works)
- All your API keys ready (optional, but recommended)

---

## Step 1: Initialize Git Repository (if not already done)

```bash
cd /Users/aazir/Desktop/AIModules/DarkAI/DarkAI-consolidated

# Check if git is already initialized
git status

# If not initialized, run:
git init
git add .
git commit -m "Initial commit: Consolidated DarkAI platform"
```

---

## Step 2: Push to GitHub

### Option A: Create New Repository on GitHub
1. Go to https://github.com/new
2. Create a new repository (e.g., `darkai-consolidated`)
3. **DO NOT** initialize with README, .gitignore, or license
4. Copy the repository URL (e.g., `https://github.com/YOUR_USERNAME/darkai-consolidated.git`)

### Option B: Use Existing Repository
If you already have a repository, use that URL.

### Push Your Code
```bash
cd /Users/aazir/Desktop/AIModules/DarkAI/DarkAI-consolidated

# Add remote (replace with your actual GitHub URL)
git remote add origin https://github.com/YOUR_USERNAME/darkai-consolidated.git

# Push to GitHub
git branch -M main
git push -u origin main
```

---

## Step 3: Connect to Render

1. Go to https://dashboard.render.com
2. Click **"New +"** ‚Üí **"Blueprint"**
3. Connect your GitHub account (if not already connected)
4. Select your repository: `darkai-consolidated`
5. Render will automatically detect `render.yaml`

---

## Step 4: Configure Environment Variables in Render

After Render creates your services, go to each service and add environment variables:

### For the Web Service (Main App)

Go to your web service ‚Üí **Environment** tab ‚Üí Add these variables:

#### Database (Auto-configured from render.yaml, but verify):
- `POSTGRES_HOST` - Auto-set from database
- `POSTGRES_PORT` - Auto-set from database  
- `POSTGRES_USER` - Auto-set from database
- `POSTGRES_PASSWORD` - Auto-set from database
- `POSTGRES_DB` - Auto-set from database

#### API Keys (Optional - add if you have them):
```
SERPAPI_API_KEY=d9154c01fe60a22f97ec5c0545d6f9b090fa52f690a5c518ad6a29af6f54935a
OPENAI_API_KEY=your_openai_key_here
IPAPI_KEY=your_ipapi_key_here
VIRUSTOTAL_API_KEY=your_virustotal_key_here
NUMLOOKUP_API_KEY=your_numlookup_key_here
ETHERSCAN_API_KEY=your_etherscan_key_here
BUILTWITH_API_KEY=your_builtwith_key_here
IPLOCATE_API_KEY=your_iplocate_key_here
SHODAN_API_KEY=your_shodan_key_here
```

#### Neo4j (Optional - for graph features):
```
NEO4J_URI=neo4j+s://your-instance.databases.neo4j.io
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your_neo4j_password
```

#### Flask Configuration (Auto-configured, but verify):
- `FLASK_ENV=production`
- `FLASK_DEBUG=False`
- `SECRET_KEY` - Auto-generated by Render (or set your own)

---

## Step 5: Deploy

1. Render will automatically:
   - Create PostgreSQL database (`ncii-postgres`)
   - Set database connection env vars
   - Build the app
   - Deploy to production

2. Wait for deployment to complete (usually 5-10 minutes)

3. Your app will be available at: `https://your-app-name.onrender.com`

---

## Step 6: Test Your Deployment

After deployment, test these URLs:

- **Homepage**: `https://your-app-name.onrender.com/`
- **About Page**: `https://your-app-name.onrender.com/about`
- **PersonaForge**: `https://your-app-name.onrender.com/personaforge`
- **BlackWire**: `https://your-app-name.onrender.com/blackwire`
- **ShadowStack**: `https://your-app-name.onrender.com/shadowstack`

---

## Step 7: Verify Database Connection

1. Go to your web service ‚Üí **Logs** tab
2. Look for:
   - ‚úÖ `PostgreSQL connection established`
   - ‚úÖ `PersonaForge blueprint registered`
   - ‚úÖ `BlackWire blueprint registered`
   - ‚úÖ `ShadowStack blueprint registered`

If you see database connection errors:
- Check that the PostgreSQL database was created
- Verify environment variables are set correctly
- Check the database connection string in Render dashboard

---

## Step 8: (Optional) Set Up Neo4j

If you want graph features to work:

1. Create a Neo4j Aura account: https://neo4j.com/cloud/aura/
2. Create a free instance
3. Copy the connection URI, username, and password
4. Add to Render environment variables:
   - `NEO4J_URI`
   - `NEO4J_USERNAME`
   - `NEO4J_PASSWORD`

---

## üéØ Quick Checklist

- [ ] Git repository initialized
- [ ] Code pushed to GitHub
- [ ] Repository connected to Render
- [ ] `render.yaml` detected by Render
- [ ] PostgreSQL database created (auto)
- [ ] Environment variables set in Render dashboard
- [ ] `SERPAPI_API_KEY` added (you have this)
- [ ] Other API keys added (optional)
- [ ] Neo4j configured (optional)
- [ ] Deployment successful
- [ ] All URLs tested and working

---

## ‚ö†Ô∏è Important Notes

1. **Free Tier Limitations**:
   - Render free tier spins down after 15 minutes of inactivity
   - First request after spin-down takes ~30 seconds
   - Consider upgrading for production use

2. **Database**:
   - PostgreSQL is created automatically from `render.yaml`
   - Database persists data even when web service spins down

3. **Static Files**:
   - All static files are served correctly via Flask
   - Favicons should load from `/static/favicon.svg`

4. **API Keys**:
   - Services work without API keys (degraded functionality)
   - Add keys for full functionality

---

## üêõ Troubleshooting

### Deployment Fails
- Check **Logs** tab for error messages
- Verify `requirements.txt` is correct
- Check Python version in `render.yaml` (3.11.0)

### Database Connection Errors
- Verify PostgreSQL database was created
- Check environment variables are set
- Look for connection timeout errors in logs

### 404 Errors on Pages
- Verify all blueprints are registered
- Check URL paths match your routes
- Hard refresh browser (Cmd+Shift+R)

### Favicons Not Loading
- Check `/static/favicon.svg` exists
- Verify static file serving route in `app.py`
- Check browser console for 404 errors

---

## üìû Need Help?

Check the logs in Render dashboard for specific error messages. Most issues are:
- Missing environment variables
- Database connection problems
- Import errors (check requirements.txt)

---

**Estimated Time**: 15-20 minutes

**Status**: Ready to deploy! üöÄ

